MySQL-PL Exercise 5

Q1:Write a stored procedure by the name of Comp_intr to
calculate the amount of interest on a bank account that compounds interest yearly. 
The formula is:- I
= p (1+ r) y â€“ p where:-
I is the total interest earned.
p is the principal.
r is the rate of interest as a decimal less than 1, and y 
is the number of years the money is earning interest.
Your stored procedure should accept the values of p, r and y as 
parameters and insert the Interest and Total amount into tempp table.

Ans:

create table tempp(Interest double,Total_amount double);

delimiter //
mysql> create procedure Comp_intr(p double,r double,y int)
    -> begin
    -> declare interest double;
    -> declare total double;
    -> set interest=p*(1+r)^y-p;
    -> set total=interest+p;
    -> insert into tempp values(interest,total);
    -> end //
Query OK, 0 rows affected (0.02 sec)

mysql> delimiter ;
mysql> Call Comp_intr(12000,10,2);
Query OK, 1 row affected (0.01 sec)

mysql> select * from temp;
ERROR 1146 (42S02): Table 'classwork.temp' doesn't exist
mysql> select * from tempp;
+----------+--------------+
| Interest | Total_amount |
+----------+--------------+
|    96000 |       108000 |
+----------+--------------+
1 row in set (0.00 sec)


Q2:Create a stored function by the name of Age_calc. 
Your stored function should accept the date of birth of a person as a parameter. The stored function should calculate the age of the person in years. 
The stored function should return the age in years.

delimiter //
create function Age_calc (x date)
returns int
deterministic
begin
return round(datediff(Sysdate(),x)/365);
end //
delimiter ;

select age_calc('2020-01-29') "Age";
+------+
| Age  |
+------+
|    3 |
+------+
1 row in set (0.00 sec)



